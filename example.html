<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript">
			var SiUXNotifierParam = {
				'id'                    : '0221b86f3352e295ef756341b0137ead',
				'captureUncaught'       : true,					// logging errors, default false
				'debug'			: true,					// debug mode (console), default false
				'data'                  : {
					'environment'           : 'project_0.01',
					'revision'              : 'production',			// production | develop
					'personId'		: 111,				// info for track user
					'personUsername'	: 'James Bond',
					'personEmail'		: 'james@bond.name'
				}
			};

			Cookie={set:function(a){var b="";if(a.name){b=a.name}var e="";if(a.value){e=a.value}var g=new Date();g.setFullYear(g.getFullYear()+10);var c=g.toUTCString();if(a.expiry){c=a.expiry.toUTCString()}var f="/";if(a.path){f=a.path}var d="";if(a.domain){d=a.domain}document.cookie=escape(b)+"="+escape(e)+"; expires="+c+"; path="+f+"; domain="+d},get:function(b){var a=new RegExp("(^|;) ?"+b+"=([^;]*)(;|$)");var c=document.cookie.match(a);var d="";if(c){d=unescape(c[2])}return d}};var SiUXNotifier={};SiUXNotifier.urlNotify="https://logni-online.esiux.com/notifier";SiUXNotifier.urlJsLogni="https://logni-static.esiux.com/js/logni/logni.min.js";SiUXNotifier.debug=false;SiUXNotifier.captureUncaught=false;SiUXNotifier.loadScriptAsync=false;SiUXNotifier.logMask="I3E1F1W2";SiUXNotifier.session=null;SiUXNotifier.userIdentCookie="ni-notifier-userid";SiUXNotifier.userIdent=Cookie.get(SiUXNotifier.userIdentCookie);SiUXNotifier.clientData={environment:null,revision:null,personId:null,personUsername:null,personEmail:null};SiUXNotifier.init=function(){if(typeof SiUXNotifierParam==="undefined"||typeof SiUXNotifierParam.id==="undefined"){return}SiUXNotifier.id=SiUXNotifierParam.id;SiUXNotifier.wrappedFuncError=null;SiUXNotifier.logList=[];SiUXNotifier.errList=[];SiUXNotifier.docLocOrigin=document.location.protocol+"//"+document.location.hostname+document.location.pathname;SiUXNotifier.sendingFirstLog=false;if(typeof SiUXNotifierParam.urlNotify!=="undefined"){SiUXNotifier.urlNotify=SiUXNotifierParam.urlNotify}if(typeof SiUXNotifierParam.urlJsLogni!=="undefined"){SiUXNotifier.urlJsLogni=SiUXNotifierParam.urlJsLogni}if(typeof SiUXNotifierParam.debug!=="undefined"){SiUXNotifier.debug=SiUXNotifierParam.debug}if(typeof SiUXNotifierParam.captureUncaught!=="undefined"){SiUXNotifier.captureUncaught=SiUXNotifierParam.captureUncaught}if(typeof SiUXNotifierParam.loadScriptAsync!=="undefined"){SiUXNotifier.loadScriptAsync=SiUXNotifierParam.loadScriptAsync}if(typeof SiUXNotifierParam.logMask!=="undefined"){SiUXNotifier.logMask=SiUXNotifierParam.logMask}if(typeof SiUXNotifierParam.data!=="undefined"){for(var c in SiUXNotifierParam.data){try{if(c=="environment"||c=="revision"||c=="personUsername"||c=="personEmail"){SiUXNotifier.clientData[c]=SiUXNotifierParam.data[c].toString()}else{if(c=="personId"){SiUXNotifier.clientData[c]=parseInt(SiUXNotifierParam.data[c])}}}catch(b){SiUXNotifier.console("error","SiUX Notifier: Type of client data, ",b)}}}if(!SiUXNotifier.userIdent){SiUXNotifier.userIdent=(new Date().getTime().toString()+(new Array(32).join().replace(/(.|$)/g,function(){return((Math.random()*36)|0).toString(36)}))).substring(0,32);Cookie.set({name:SiUXNotifier.userIdentCookie,value:SiUXNotifier.userIdent,domain:document.location.hostname.split(".").slice(-2).join(".")})}setTimeout(function(){SiUXNotifier.addScript(SiUXNotifier.urlJsLogni,SiUXNotifier.logInit)},0);SiUXNotifier.addEventListener(window,"load",SiUXNotifier.windowOnLoad);if(SiUXNotifier.captureUncaught){window.onerror=SiUXNotifier.wrapInternalFuncError(SiUXNotifier.windowOnError());var d="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(var a=0;a<d.length;a++){SiUXNotifier.wrapEventListener(d[a])}}};SiUXNotifier.console=function(a,b){if(typeof console!=="undefined"&&console!==null&SiUXNotifierParam.debug){if(arguments.length>2){console[a](b,arguments[2])}else{console[a](b)}}};SiUXNotifier.wrapInternalFuncError=function(a){return function(){try{return a.apply(this,arguments)}catch(b){SiUXNotifier.console("error","SiUX Notifier: Internal error, ",b)}}};SiUXNotifier.wrapFuncError=function(a,b){try{if(typeof a!=="function"){return a}if(!a._wrap){a._wrap=function(){try{a.apply(this,arguments)}catch(f){SiUXNotifier.wrappedFuncError=f;SiUXNotifier.console("log","SiUX Notifier: event error, ",f);throw f}}}for(var d in a){a._wrap[d]=a[d]}return a._wrap}catch(c){return a}};SiUXNotifier.wrapEventListener=function(c){if(typeof window[c]==="undefined"||typeof window[c].prototype==="undefined"){return}var b=window[c].prototype.addEventListener;window[c].prototype.addEventListener=function(e,f,d){b.call(this,e,SiUXNotifier.wrapFuncError(f,c),d)};var a=window[c].prototype.removeEventListener;window[c].prototype.removeEventListener=function(e,f,d){a.call(this,e,f._wrap||f,d)}};SiUXNotifier.windowOnError=function(){return function(){var a=Array.prototype.slice.call(arguments,0);if(SiUXNotifier.wrappedFuncError&&!a[4]){a[4]=SiUXNotifier.wrappedFuncError}SiUXNotifier.wrappedFuncError=null;SiUXNotifier.console("log","SiUX Notifier: window onerror, ",a[0]);var b={message:a[0],source:a[1],lineno:a[2],colno:a[3]||0,stack:""};if(a[4]&&typeof a[4].stack!=="undefined"){b.stack=a[4].stack}SiUXNotifier.log("SiUX Notifier: %s",[a[0]],"ERR",4,b)}};SiUXNotifier.windowOnLoad=function(){if(typeof log==="undefined"||typeof log.ni==="undefined"){SiUXNotifier.sendLog(SiUXNotifier.logList);SiUXNotifier.logList=[]}};SiUXNotifier.addEventListener=function(c,d,b,a){a=(a)?true:false;if(c.addEventListener){c.addEventListener(d,b,a)}else{if(c.attachEvent){c.attachEvent("on"+d,b)}else{if(c["on"+d]){}else{c["on"+d]=b}}}};SiUXNotifier.addScript=function(c,d){var b=document.getElementsByTagName("head")[0];var a=document.createElement("script");a.type="text/javascript";a.src=c;a.async=SiUXNotifier.loadScriptAsync;a.onreadystatechange=a.onload=SiUXNotifier.wrapInternalFuncError(function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){d()}});b.appendChild(a)};SiUXNotifier.logInit=function(){log.mask(SiUXNotifier.logMask);log.file(SiUXNotifier.urlNotify);log.method("POST");if(typeof console!=="undefined"&&console!==null&SiUXNotifierParam.debug){log.stderr(1)}if(SiUXNotifierParam.debug){SiUXNotifier.console("log","SiUX Notifier: logni init")}SiUXNotifier.sendLog(SiUXNotifier.errList);SiUXNotifier.errList=[];if(SiUXNotifier.logList.length>0){SiUXNotifier.sendLog(SiUXNotifier.logList);SiUXNotifier.logList=[]}};SiUXNotifier.setBasicData=function(b){if(SiUXNotifier.session){b.session=SiUXNotifier.session;return b}SiUXNotifier.sendingFirstLog=true;b.id=SiUXNotifier.id;b.origin=encodeURIComponent(SiUXNotifier.docLocOrigin);b.userIdent=SiUXNotifier.userIdent;for(var a in SiUXNotifier.clientData){if(SiUXNotifier.clientData[a]){b[a]=SiUXNotifier.clientData[a]}}return b};SiUXNotifier.logniCallback=function(a){if(!SiUXNotifier.session&&a.statusCode=="OK"){SiUXNotifier.session=a.data.session}SiUXNotifier.sendingFirstLog=false};SiUXNotifier.logni=function(g,b,a,f,e,d){var c=setInterval(function(){if(!SiUXNotifier.sendingFirstLog){if(d){e[0]=SiUXNotifier.setBasicData(e[0])}else{e=SiUXNotifier.setBasicData(e)}log.ni(g,b,a,f,e,SiUXNotifier.logniCallback);clearTimeout(c)}},100)};SiUXNotifier.sendLog=function(e){if(e.length==0){return}var f=null;var b=[];var a=[];var g=[];var h=[];var d=[];for(var c=0;c<e.length;c++){f=e[c];b.push(f.msg);a.push(f.paramList);g.push(f.mask);h.push(f.depth);d.push(f.data)}SiUXNotifier.logni(b,a,g,h,d,true)};SiUXNotifier.log=function(f,b,a,e){var d={};if(arguments.length>4){d=arguments[4]}if(typeof log==="undefined"||typeof log.ni==="undefined"){var c={msg:f,paramList:b,mask:a,depth:e,data:d};if(arguments.length>4){SiUXNotifier.errList.push(c)}else{SiUXNotifier.logList.push(c)}return}SiUXNotifier.logni(f,b,a,e,d,false)};SiUXNotifier.init();
		</script>
	</head>

	<body>
		<script type="text/javascript">
			/* Example log with mask info and depth 3 */
			var hello = 'hello world';
        	        SiUXNotifier.log('Example info log - %s', [hello], 'INFO', 3);
 
			/* Example log with mask warning and depth 2 */
        	        SiUXNotifier.log('Example warning log', [], 'WARN', 2);
 
			/* Example log with mask fatal and depth 4 */
        	        SiUXNotifier.log('Example fatal log', [], 'FATAL', 4);
      	        
			/* Example error log */
			var err 	= ['errItem1', 'errItem2'];
			var errDesc	= 'Error description';
			SiUXNotifier.log('Example error log - %s, %s', [err, errDesc], 'ERR', 4);

			/* Example error in javascript, call undefined function */
			notExistFunc();
		</script>

		<!-- Example error triggered by onclick event, call undefined function-->
		<a href="#" onclick="javascript:notExistFuncLink(); return false;">Error on click event</a>
	</body>
</html>
